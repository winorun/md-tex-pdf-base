\documentclass[12pt,$if(size)$ $size$ $endif$]{$if(type)$$type$$endif$}
%\documentclass{article}		
\usepackage{polyglossia}   %% загружает пакет многоязыковой вёрстки
\setdefaultlanguage[spelling=modern]{russian}  %% устанавливает главный язык документа
\setotherlanguage{english}

\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\graphicspath{{img/}}

\usepackage{xcolor}
\usepackage{listings}

\usepackage{longtable}
\usepackage{booktabs}

\sloppy

%%\usepackage[utf8]{inputenc}
\usepackage{extsizes}
\usepackage[left=1cm,right=1cm,top=1.5cm,bottom=1.5cm]{geometry}

\defaultfontfeatures{Ligatures={TeX},Renderer=Basic}  %% свойства шрифтов по умолчанию
\setmainfont{DejaVu Serif} %% задаёт основной шрифт документа
\setsansfont{DejaVu Sans}                   %% задаёт шрифт без засечек
\setmonofont{DejaVu Sans Mono}              %% задаёт моноширинный шрифт

\usepackage{ulem}

\lstset{
    %~ backgroundcolor = \color{lightgray},
    xleftmargin = 2cm,
    numberstyle=\scriptsize,
    stepnumber=1,
    basicstyle=\scriptsize,
    numbersep=5pt,
    breaklines=true,
    keywordstyle=\itshape\color{blue},
    stringstyle=\itshape\color{teal},
    commentstyle=\color{gray},
    rulecolor=\color{black},
    framexleftmargin = 1em,
    %~ frameround=tttt,
    frame=tb,
    breaklines=true,
    emphstyle=\color{black},
    keepspaces=true,
    extendedchars=\true,
    inputencoding=utf8,
    escapechar={|}
}


\usepackage {hyperref}

$if(title)$
\title{$title$}
$endif$
$if(subtitle)$
\subtitle{$subtitle$}
$endif$
$if(author)$
\author{$for(author)$$author$$sep$ \and $endfor$}
$endif$
$if(date)$
\date{$date$}
$endif$

\begin{document}
$if(title)$
\maketitle
$endif$
\tableofcontents
$body$
\end{document}
